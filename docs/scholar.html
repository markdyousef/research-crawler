---

title: scholar

keywords: fastai
sidebar: home_sidebar

summary: "API details."
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 01_scholar.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">scholarly</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="kn">import</span> <span class="nn">threading</span> <span class="k">as</span> <span class="nn">th</span>
<span class="kn">import</span> <span class="nn">multiprocessing</span> <span class="k">as</span> <span class="nn">mp</span>
<span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tnrange</span><span class="p">,</span> <span class="n">tqdm_notebook</span>
<span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dpath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;./data/scholar/&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_meta</span><span class="p">(</span><span class="n">author</span><span class="p">):</span>
    <span class="n">author</span><span class="o">.</span><span class="n">fill</span><span class="p">()</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">id</span> <span class="o">=</span> <span class="n">author</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">author</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">email</span> <span class="o">=</span> <span class="n">author</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
                <span class="n">affiliation</span> <span class="o">=</span> <span class="n">author</span><span class="o">.</span><span class="n">affiliation</span><span class="p">,</span>
                <span class="n">interests</span> <span class="o">=</span> <span class="n">author</span><span class="o">.</span><span class="n">interests</span><span class="p">,</span>
                <span class="n">n_coauthors</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">author</span><span class="o">.</span><span class="n">coauthors</span><span class="p">),</span>
                <span class="n">n_publications</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">author</span><span class="o">.</span><span class="n">publications</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">save_author</span><span class="p">(</span><span class="n">author</span><span class="p">,</span> <span class="n">fpath</span><span class="p">):</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">get_meta</span><span class="p">(</span><span class="n">author</span><span class="p">)</span>
    <span class="n">fpath</span> <span class="o">=</span> <span class="n">fpath</span><span class="o">/</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{a[&quot;id&quot;]}</span><span class="s1">.pickle&#39;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fpath</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="n">pickle</span><span class="o">.</span><span class="n">HIGHEST_PROTOCOL</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">retrieve_authors</span><span class="p">(</span><span class="n">kword</span><span class="o">=</span><span class="s1">&#39;EEG&#39;</span><span class="p">):</span>
    <span class="n">authors</span> <span class="o">=</span> <span class="n">scholarly</span><span class="o">.</span><span class="n">search_keyword</span><span class="p">(</span><span class="n">kword</span><span class="p">)</span>
    <span class="n">fpath</span> <span class="o">=</span> <span class="n">dpath</span><span class="o">/</span><span class="n">kword</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">Pool</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">tqdm_notebook</span><span class="p">(</span><span class="n">authors</span><span class="p">):</span>
        <span class="n">p</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">save_author</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">fpath</span><span class="p">))</span>
    <span class="n">p</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">retrieve_authors</span><span class="p">(</span><span class="s1">&#39;EEG&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">Exception</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-14-df74ff9119e9&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>retrieve_authors<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;EEG&#39;</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">&lt;ipython-input-13-f2ba01392eb8&gt;</span> in <span class="ansi-cyan-fg">retrieve_authors</span><span class="ansi-blue-fg">(kword)</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span>     fpath <span class="ansi-blue-fg">=</span> dpath<span class="ansi-blue-fg">/</span>kword
<span class="ansi-green-intense-fg ansi-bold">      4</span>     p <span class="ansi-blue-fg">=</span> mp<span class="ansi-blue-fg">.</span>Pool<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">----&gt; 5</span><span class="ansi-red-fg">     </span><span class="ansi-green-fg">for</span> a <span class="ansi-green-fg">in</span> tqdm_notebook<span class="ansi-blue-fg">(</span>authors<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      6</span>         p<span class="ansi-blue-fg">.</span>apply_async<span class="ansi-blue-fg">(</span>save_author<span class="ansi-blue-fg">,</span> args<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">(</span>a<span class="ansi-blue-fg">,</span> fpath<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      7</span>     p<span class="ansi-blue-fg">.</span>close<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/anaconda3/envs/zen_env/lib/python3.7/site-packages/tqdm/notebook.py</span> in <span class="ansi-cyan-fg">__iter__</span><span class="ansi-blue-fg">(self, *args, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">    220</span>     <span class="ansi-green-fg">def</span> __iter__<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">*</span>args<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    221</span>         <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 222</span><span class="ansi-red-fg">             </span><span class="ansi-green-fg">for</span> obj <span class="ansi-green-fg">in</span> super<span class="ansi-blue-fg">(</span>tqdm_notebook<span class="ansi-blue-fg">,</span> self<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>__iter__<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">*</span>args<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    223</span>                 <span class="ansi-red-fg"># return super(tqdm...) will not catch exception</span>
<span class="ansi-green-intense-fg ansi-bold">    224</span>                 <span class="ansi-green-fg">yield</span> obj

<span class="ansi-green-fg">~/anaconda3/envs/zen_env/lib/python3.7/site-packages/tqdm/std.py</span> in <span class="ansi-cyan-fg">__iter__</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   1079</span>             &#34;&#34;&#34;), fp_write=getattr(self.fp, &#39;write&#39;, sys.stderr.write))
<span class="ansi-green-intense-fg ansi-bold">   1080</span> 
<span class="ansi-green-fg">-&gt; 1081</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">for</span> obj <span class="ansi-green-fg">in</span> iterable<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">   1082</span>             <span class="ansi-green-fg">yield</span> obj
<span class="ansi-green-intense-fg ansi-bold">   1083</span>             <span class="ansi-red-fg"># Update and possibly print the progressbar.</span>

<span class="ansi-green-fg">~/anaconda3/envs/zen_env/lib/python3.7/site-packages/scholarly-0.2.5-py3.7.egg/scholarly/scholarly.py</span> in <span class="ansi-cyan-fg">_search_citation_soup</span><span class="ansi-blue-fg">(soup)</span>
<span class="ansi-green-intense-fg ansi-bold">    113</span>             url <span class="ansi-blue-fg">=</span> next_button<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;onclick&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">17</span><span class="ansi-blue-fg">:</span><span class="ansi-blue-fg">-</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">    114</span>             url <span class="ansi-blue-fg">=</span> codecs<span class="ansi-blue-fg">.</span>getdecoder<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;unicode_escape&#34;</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">(</span>url<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">]</span>
<span class="ansi-green-fg">--&gt; 115</span><span class="ansi-red-fg">             </span>soup <span class="ansi-blue-fg">=</span> _get_soup<span class="ansi-blue-fg">(</span>_HOST<span class="ansi-blue-fg">+</span>url<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    116</span>         <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    117</span>             <span class="ansi-green-fg">break</span>

<span class="ansi-green-fg">~/anaconda3/envs/zen_env/lib/python3.7/site-packages/scholarly-0.2.5-py3.7.egg/scholarly/scholarly.py</span> in <span class="ansi-cyan-fg">_get_soup</span><span class="ansi-blue-fg">(pagerequest)</span>
<span class="ansi-green-intense-fg ansi-bold">     87</span> <span class="ansi-green-fg">def</span> _get_soup<span class="ansi-blue-fg">(</span>pagerequest<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     88</span>     <span class="ansi-blue-fg">&#34;&#34;&#34;Return the BeautifulSoup for a page on scholar.google.com&#34;&#34;&#34;</span>
<span class="ansi-green-fg">---&gt; 89</span><span class="ansi-red-fg">     </span>html <span class="ansi-blue-fg">=</span> _get_page<span class="ansi-blue-fg">(</span>pagerequest<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     90</span>     html <span class="ansi-blue-fg">=</span> html<span class="ansi-blue-fg">.</span>replace<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">u&#39;\xa0&#39;</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">u&#39; &#39;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     91</span>     <span class="ansi-green-fg">return</span> BeautifulSoup<span class="ansi-blue-fg">(</span>html<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#39;html.parser&#39;</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/anaconda3/envs/zen_env/lib/python3.7/site-packages/scholarly-0.2.5-py3.7.egg/scholarly/scholarly.py</span> in <span class="ansi-cyan-fg">_get_page</span><span class="ansi-blue-fg">(pagerequest)</span>
<span class="ansi-green-intense-fg ansi-bold">     82</span>         <span class="ansi-red-fg"># return _get_page(re.findall(r&#39;https:\/\/(?:.*?)(\/.*)&#39;, resp)[0])</span>
<span class="ansi-green-intense-fg ansi-bold">     83</span>     <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">---&gt; 84</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">raise</span> Exception<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;Error: {0} {1}&#39;</span><span class="ansi-blue-fg">.</span>format<span class="ansi-blue-fg">(</span>resp<span class="ansi-blue-fg">.</span>status_code<span class="ansi-blue-fg">,</span> resp<span class="ansi-blue-fg">.</span>reason<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     85</span> 
<span class="ansi-green-intense-fg ansi-bold">     86</span> 

<span class="ansi-red-fg">Exception</span>: Error: 429 Too Many Requests</pre>
</div>
</div>

</div>
</div>

</div>
</div>
 

